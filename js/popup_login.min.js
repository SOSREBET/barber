const loginModal=document.querySelector(".modal-login"),loginForm=loginModal.querySelector(".login-form"),loginLink=document.querySelector(".login-link"),loginClose=loginModal.querySelector(".modal-close");let localStorageSupport=!0,login="";try{login=localStorage.getItem("login")}catch(o){localStorageSupport=!1}loginLink.addEventListener("click",function(o){o.preventDefault(),loginModal.classList.remove("modal-hide"),loginModal.classList.add("modal-show"),loginModal.offsetWidth=loginModal.offsetWidth,login?(loginForm.login.value=login,loginForm.password.focus()):loginForm.login.focus()}),loginForm.addEventListener("submit",function(o){loginForm.login.value&&loginForm.password.value?localStorageSupport&&localStorage.setItem("login",loginForm.login.value):(o.preventDefault(),loginModal.classList.remove("modal-error"),loginModal.offsetWidth=loginModal.offsetWidth,loginModal.classList.add("modal-error"))}),loginClose.addEventListener("click",function(o){o.preventDefault(),loginModal.classList.add("modal-hide"),setTimeout(()=>{loginModal.classList.remove("modal-show")},550),loginModal.classList.remove("modal-error")}),window.addEventListener("keydown",function(o){"Escape"===o.key&&loginModal.classList.contains("modal-show")&&(loginModal.classList.add("modal-hide"),setTimeout(()=>{loginModal.classList.remove("modal-show")},550),loginModal.classList.remove("modal-error"))});